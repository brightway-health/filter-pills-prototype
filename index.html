<html>

<head>
    <link rel="stylesheet" href="node_modules/vue-slider-component/theme/default.css" />
    <link rel="stylesheet" href="node_modules/@trevoreyre/autocomplete-vue/dist/style.css" />
    <link rel="stylesheet" href="index.css" />

    <title>Brightway Q&A Pills Filter Prototype</title>
</head>

<body>
    <div id="app" @click="closeUserFilter">
        <div id="container">
            <div id="header">
                <div class="left">
                    <img src="logo.png" id="logo">
                    <a class="pill" id="header-search" @click="alert('Not in Prototype')"><img src="loupe.png" height="16" style="margin: 0 16px 0 0" />Search Brightway</a>
                </div>
                <div id="header-pills">
                    <a class="pill" id="header-ask" @click="alert('Not in Prototype')"><img src="plus.png" height="16"  style="margin: 0 8px 0 0" />Ask a Question</a>
                    <a id="header-menu" @click="alert('Not in Prototype')"><img src="menu.png" height="16" style="margin: 0 8px 0 0" />Menu</a>
                </div>
                <br class="clr" />
            </div>
            <div id="col-container">
                <div id="col1">
                    <div id="questions">
                        <h1>Browse Questions</h1>
                        <div id="main-col-filters">
                            <label id="main-col-filters-label">Selected topics:</label>
                            <div>
                                <main-col-filters :number-selected="filtersSelected.total"></main-col-filters>
                                <span @click="resetFilters" id="reset-tags" v-show="!myTagsSelected">Reset to my tags</span>
                            </div>
                            <br class="clr" />
                        </div>
                        <div id="user-filters-sentence" v-if="hasUserFilters">{{userFiltersSentence}}</div>
                        <div id="question-nav">
                            <a class="pill" id="sort-questions-btn" @click="alert('Not in prototype')">Sort By: <span class="weak">Relevance</span><img src="down-arrow.svg" height="16" style="margin: 0 0 0 8px" /></a>
                            <h3 class="question-count">
                                <span v-if="loading">-</span>
                                <span v-if="!loading">{{ results }} questions</span>
                            </h3>
                            <br class="clr" />
                        </div>
                        <div id="question-list">
                            <div v-if="loading" id="question-loading">
                                <h3>Loading...</h3>
                            </div>
                            <div v-if="!loading">
                                <question v-for="question in questions" :question="question"></question>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="col2-placeholder"></div>
                <div id="col2">
                    <h2 id="filter-title" @click="toggleSidebar">
                        <span class="left">View Questions By Topic</span>
                        <span class="right">
                            <span v-show="!showSidebar">^</span>
                            <span v-show="showSidebar">v</span>
                        </span>
                    </h2>
                    <br class="clr" />
                    <a @click="clearFilters" id="view-all-link" :class="{disabled: filtersSelected.total === 0}">View All Questions</a>
                    <div id="filters-hidden" v-show="!showSidebar">
                        <a class="pill" id="open-filter-btn" @click="toggleSidebar"><img src="filter.png" height="16" style="margin: 0 8px 0 0" />View Topics &ndash; <span class="weak">{{filtersSelected.total}} selected</span></a>
                    </div>
                    <div id="filters-shown" v-show="showSidebar">
                        <div id="search">
                            <input placeholder="Search tags" id="search-box" v-model="search" />
                            <div id="search-cancel-container">
                                <a id="search-cancel" @click="search = ''" v-show="search != ''">x</a>
                            </div>
                            <br class="clr" />
                        </div>
                        <div class="filter-box" v-show="showTagBasedOnSearch.symptoms">
                            <h4 @click="toggleFilter('symptoms')" :class="{ inactive: hasSearch }"><div>
                                <span class="left filter-header">Symptoms & daily life</span>
                                <span class="right">
                                    <span class="weak filter-count" v-if="!hasSearch && filtersSelected.symptoms > 0">{{filtersSelected.symptoms}} selected</span>
                                    <span v-if="!hasSearch && showFilters.symptoms">v</span>
                                    <span v-if="!hasSearch && !showFilters.symptoms">^</span>
                                </span>
                                <br class="clr" />
                            </h4>
                            <filter-list v-show="hasSearch || showFilters.symptoms" :name="'symptoms'" :search="search"></filter-list>
                        </div>
                        <div class="filter-box" v-show="showTagBasedOnSearch.therapy">
                            <h4 @click="toggleFilter('therapy')" :class="{ inactive: hasSearch }">
                                <span class="left filter-header">Type of therapy</span>
                                <span class="right">
                                    <span class="weak filter-count" v-if="!hasSearch && filtersSelected.therapy > 0">{{filtersSelected.therapy}} selected</span>
                                    <span v-if="!hasSearch && showFilters.therapy">v</span>
                                    <span v-if="!hasSearch && !showFilters.therapy">^</span>
                                </span>
                                <br class="clr" />
                                </h4>
                            <filter-list v-show="hasSearch || showFilters.therapy" :name="'therapy'" :search="search"></filter-list>
                        </div>

                        <div class="filter-box" v-show="showTagBasedOnSearch.financial">
                            <h4 @click="toggleFilter('financial')" :class="{ inactive: hasSearch }">
                                <span class="left filter-header">Financial</span>
                                <span class="right">
                                    <span class="weak filter-count" v-if="!hasSearch && filtersSelected.financial > 0">{{filtersSelected.financial}} selected</span>
                                    <span v-if="!hasSearch && showFilters.financial">v</span>
                                    <span v-if="!hasSearch && !showFilters.financial">^</span>
                                </span>
                                <br class="clr" />
                            </h4>
                            <filter-list v-show="hasSearch || showFilters.financial" :name="'financial'" :search="search"></filter-list>
                        </div>

                        <div class="filter-box" v-show="showTagBasedOnSearch.nutrition">
                            <h4 @click="toggleFilter('nutrition')" :class="{ inactive: hasSearch }">
                                <span class="left filter-header">Nutrition</span>
                                <span class="right">
                                    <span class="weak filter-count" v-if="!hasSearch && filtersSelected.nutrition > 0">{{filtersSelected.nutrition}} selected</span>
                                    <span v-if="!hasSearch && showFilters.nutrition">v</span>
                                    <span v-if="!hasSearch && !showFilters.nutrition">^</span>
                                </span>
                                <br class="clr" />
                            </h4>
                            <filter-list v-show="hasSearch || showFilters.nutrition" :name="'nutrition'" :search="search"></filter-list>
                        </div>
                        <div class="filter-box" v-show="showTagBasedOnSearch.medications">
                            <h4 @click="toggleFilter('medications')" :class="{ inactive: hasSearch }">
                                <span class="left filter-header">Medications</span>
                                <span class="right">
                                    <span class="weak filter-count" v-if="!hasSearch && filtersSelected.medications > 0">{{filtersSelected.medications}} selected</span>
                                    <span v-if="!hasSearch && showFilters.medications">v</span>
                                    <span v-if="!hasSearch && !showFilters.medications">^</span>
                                </span>
                                <br class="clr" />
                            </h4>
                            <filter-list v-show="hasSearch || showFilters.medications" :name="'medications'" :search="search"></filter-list>
                        </div>
                        <div class="filter-box" v-show="showTagBasedOnSearch.legal" :class="{ inactive: hasSearch }">
                            <h4 @click="toggleFilter('legal')">
                                <span class="left filter-header">Legal</span>
                                <span class="right">
                                    <span class="weak filter-count" v-if="!hasSearch && filtersSelected.legal > 0">{{filtersSelected.legal}} selected</span>
                                    <span v-if="!hasSearch && showFilters.legal">v</span>
                                    <span v-if="!hasSearch && !showFilters.legal">^</span>
                                </span>
                                <br class="clr" />
                            </h4>
                            <filter-list v-show="hasSearch || showFilters.legal" :name="'legal'" :search="search"></filter-list>
                        </div>

                        <div class="filter-box" v-show="showTagBasedOnSearch.user">
                            <h4 @click="toggleFilter('userType')">
                                <span class="left filter-header">
                                    <img src="filter.png" height="16" style="margin-right: 10px" />
                                    User Filters
                                </span>
                                <span class="right">
                                    <span v-if="showFilters.userType">v</span>
                                    <span v-if="!showFilters.userType">^</span>
                                </span>
                                <br class="clr" />
                            </h4>
                            <div v-show="showFilters.userType" id="user-filters">
                                <div class="user-filter-row">
                                    <span class="user-filter-title">Type of injury:</span>
                                    <span class="user-filter-dorpdown"><filter-dorpdown name="injury"></filter-dorpdown></span>
                                </div>
                                <div class="user-filter-row">
                                    <span class="user-filter-title">User type:</span>
                                    <span class="user-filter-dorpdown"><filter-dorpdown name="user"></filter-dorpdown></span>
                                </div>
                                <div class="user-filter-row">
                                    <span class="user-filter-title">Location:</span>
                                    <span class="user-filter-dorpdown">
                                        <span>
                                            <a :class="{'dorpdown-selector': true, active: locationVisible }" @click="locationVisible = !locationVisible">
                                                <span class="dorpdown-selector-title">{{locationDorpText}}</span><span class="dorpdown-selector-arrow" v-if="!locationVisible">v</span><span class="dorpdown-selector-arrow" v-if="locationVisible">^</span>
                                            </a>
                                            <div class="dorpdown-container" v-show="locationVisible">
                                                <p class="dorpdown-clear"><a :class="{disabled: locations.find(function (l) { return l.s }) === undefined}" @click="clearLocations">Clear Filters</a></p>
                                                <div class="location-filter-wrap">
                                                    <div class="filter location-filter">
                                                        <ul class="selected">
                                                            <li v-for="location in locations" v-on:click="location.s = !location.s; loadFn();" :class="{ active: location.s }">{{ location.t }}</li>
                                                        </ul>
                                                        <br class="clr" />
                                                    </div>
                                                    <div class="location-auto-wrap">
                                                        <v-autocomplete :search="locationSearch" @submit="locationSubmit" ref="locationField" placeholder="Add more cities or states"></v-autocomplete>
                                                    </div>
                                                    <br class="clr" />
                                                </div>
                                                <br class="clr" />
                                            </div>
                                        </span>
                                    </span>
                                </div>
                                <div class="user-filter-row">
                                    <span class="user-filter-title">Time since injury:</span>
                                    <span class="user-filter-dorpdown"><filter-dorpdown name="date"></filter-dorpdown></span>
                                </div>
                                <div class="user-filter-row">
                                    <span class="user-filter-title">Recovery status:</span>
                                    <span class="user-filter-dorpdown"><filter-dorpdown name="recovery"></filter-dorpdown></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <script src="vue.min.js" type="text/javascript"></script>
    <script src="node_modules/vue-slider-component/dist/vue-slider-component.umd.js" type="text/javascript"></script>
    <script src="node_modules/@trevoreyre/autocomplete-vue/dist/autocomplete.min.js" type="text/javascript"></script>
    <script src="index.js" type="text/javascript"></script>
</body>

</html>